pkgname=ollama-airllm-rocm
pkgver=v0.4.1.r5053.4b15df6b
pkgrel=1
pkgdesc="Ollama with AirLLM integration and ROCm GPU support"
arch=('x86_64')
url="https://github.com/ollama/ollama"
license=('MIT')
depends=('glibc' 'zlib' 'gcc-libs' 'rocm-hip-sdk')
optdepends=('cuda: NVIDIA GPU support')
provides=('ollama')
conflicts=('ollama')
options=(!strip !debug)

package() {
  cd "${srcdir}/.."
  
  # Copy all pre-built files
  cp -r usr "$pkgdir/"
  cp -r etc "$pkgdir/" 2>/dev/null || true
  
  # Create run directory
  install -dm755 "$pkgdir/run/media/piotro/CACHE/airllm"
  
  # Install license
  install -Dm644 usr/share/licenses/ollama-airllm-rocm/LICENSE "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
  
  # Install .install script
  install -Dm644 ollama-airllm-rocm.install "$pkgdir/usr/share/libalpm/scripts/ollama-airllm-rocm.install"
}
